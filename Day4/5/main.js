var statesData = {"type":"FeatureCollection","features":[
    {"type":"Feature","id":"01","properties":{"name":"Bujumbura","density":94.65},"geometry":{"type":"Polygon","coordinates":[[
    [-3.344637, 29.31736],
[-3.343266, 29.316845],
[-3.340525, 29.31633],
[-3.339154, 29.315472],
[-3.338811, 29.316845],
[-3.332813, 29.316158],
[-3.330585, 29.315643],
[-3.326986, 29.315128],
[-3.323559, 29.314098],
[-3.31876, 29.313583],
[-3.316532, 29.31324],
[-3.312248, 29.313068],
[-3.309506, 29.312725],
[-3.307621, 29.312038],
[-3.304022, 29.311867],
[-3.303165, 29.313412],
[-3.303165, 29.317875],
[-3.302994, 29.321308],
[-3.302137, 29.326973],
[-3.301451, 29.330921],
[-3.300766, 29.335213],
[-3.30008, 29.339333],
[-3.299566, 29.344654],
[-3.299566, 29.346714],
[-3.300423, 29.348602],
[-3.302822, 29.349461],
[-3.305222, 29.350147],
[-3.306593, 29.351006],
[-3.30745, 29.352551],
[-3.308306, 29.354954],
[-3.309506, 29.357357],
[-3.309335, 29.360275],
[-3.308306, 29.36285],
[-3.308478, 29.364052],
[-3.308478, 29.368515],
[-3.309335, 29.370575],
[-3.311391, 29.37624],
[-3.31122, 29.378815],
[-3.311734, 29.381046],
[-3.31122, 29.384308],
[-3.310534, 29.387398],
[-3.310534, 29.390316],
[-3.310534, 29.392719],
[-3.311734, 29.396496],
[-3.311563, 29.398899],
[-3.313105, 29.401646],
[-3.313276, 29.404221],
[-3.314305, 29.406796],
[-3.314476, 29.40834],
[-3.315333, 29.408684],
[-3.315333, 29.410572],
[-3.315847, 29.412117],
[-3.316532, 29.413834],
[-3.317732, 29.415722],
[-3.317732, 29.418812],
[-3.319617, 29.420013],
[-3.320303, 29.420872],
[-3.320988, 29.421215],
[-3.322873, 29.420528],
[-3.325101, 29.418983],
[-3.327158, 29.417095],
[-3.328014, 29.415894],
[-3.329385, 29.414349],
[-3.330242, 29.41246],
[-3.330756, 29.409714],
[-3.331956, 29.409714],
[-3.332984, 29.409542],
[-3.334527, 29.408169],
[-3.335898, 29.407654],
[-3.338639, 29.406452],
[-3.341039, 29.405079],
[-3.344123, 29.404736],
[-3.346522, 29.404907],
[-3.349436, 29.405594],
[-3.352178, 29.406624],
[-3.357319, 29.405766],
[-3.360575, 29.405594],
[-3.362117, 29.405251],
[-3.366915, 29.404049],
[-3.368629, 29.402504],
[-3.369828, 29.402504],
[-3.371028, 29.401989],
[-3.371713, 29.401474],
[-3.37257, 29.401131],
[-3.374112, 29.400444],
[-3.375141, 29.399586],
[-3.375997, 29.399242],
[-3.376854, 29.399929],
[-3.377711, 29.401474],
[-3.379425, 29.401131],
[-3.380796, 29.401474],
[-3.383023, 29.402676],
[-3.384737, 29.403706],
[-3.386279, 29.402847],
[-3.38765, 29.401989],
[-3.389706, 29.401989],
[-3.39262, 29.403534],
[-3.394333, 29.404392],
[-3.395533, 29.404564],
[-3.397075, 29.404564],
[-3.398617, 29.403706],
[-3.395704, 29.401646],
[-3.395875, 29.399071],
[-3.395019, 29.397526],
[-3.395019, 29.395123],
[-3.39399, 29.393578],
[-3.393648, 29.391346],
[-3.393305, 29.388428],
[-3.393305, 29.386711],
[-3.394676, 29.384823],
[-3.396218, 29.383793],
[-3.397075, 29.383621],
[-3.401873, 29.384823],
[-3.403758, 29.386196],
[-3.404957, 29.386883],
[-3.405986, 29.387226],
[-3.406157, 29.385853],
[-3.4065, 29.384136],
[-3.4065, 29.381905],
[-3.408727, 29.381905],
[-3.410441, 29.383278],
[-3.410955, 29.383278],
[-3.412668, 29.38345],
[-3.415753, 29.383106],
[-3.416438, 29.382591],
[-3.419351, 29.381218],
[-3.421579, 29.382935],
[-3.425006, 29.382935],
[-3.425692, 29.382591],
[-3.425692, 29.380188],
[-3.425692, 29.3783],
[-3.426034, 29.37418],
[-3.427062, 29.373665],
[-3.429119, 29.37315],
[-3.432032, 29.372463],
[-3.434602, 29.372292],
[-3.4394, 29.371262],
[-3.442141, 29.370403],
[-3.444026, 29.368172],
[-3.443512, 29.366112],
[-3.442141, 29.364052],
[-3.44197, 29.362164],
[-3.441627, 29.361305],
[-3.441456, 29.35873],
[-3.440428, 29.356327],
[-3.439914, 29.354267],
[-3.439571, 29.351692],
[-3.438372, 29.348774],
[-3.437686, 29.346886],
[-3.437344, 29.344826],
[-3.437344, 29.342594],
[-3.434602, 29.343109],
[-3.433745, 29.343281],
[-3.43306, 29.344654],
[-3.432374, 29.344654],
[-3.430489, 29.342937],
[-3.430661, 29.339848],
[-3.430661, 29.338818],
[-3.426206, 29.338303],
[-3.423807, 29.337273],
[-3.42175, 29.336929],
[-3.421065, 29.338818],
[-3.418323, 29.339676],
[-3.416267, 29.339333],
[-3.414896, 29.340534],
[-3.413525, 29.341736],
[-3.412326, 29.342766],
[-3.409755, 29.342079],
[-3.408556, 29.342937],
[-3.405986, 29.343281],
[-3.404615, 29.343281],
[-3.402901, 29.343796],
[-3.40153, 29.343967],
[-3.400159, 29.341736],
[-3.399303, 29.341908],
[-3.397589, 29.343452],
[-3.395361, 29.344482],
[-3.395361, 29.345856],
[-3.39142, 29.348087],
[-3.390563, 29.349632],
[-3.387821, 29.349632],
[-3.386279, 29.350147],
[-3.383366, 29.349289],
[-3.380281, 29.348431],
[-3.378739, 29.346371],
[-3.37754, 29.344826],
[-3.37634, 29.344139],
[-3.374969, 29.344654],
[-3.374455, 29.345684],
[-3.37377, 29.346199],
[-3.373598, 29.344482],
[-3.374455, 29.343281],
[-3.375312, 29.342766],
[-3.375312, 29.341908],
[-3.374112, 29.339848],
[-3.371885, 29.338818],
[-3.371371, 29.337444],
[-3.370685, 29.335899],
[-3.368971, 29.337101],
[-3.367772, 29.338989],
[-3.367772, 29.340363],
[-3.366572, 29.340363],
[-3.365201, 29.341908],
[-3.363145, 29.340878],
[-3.360746, 29.339504],
[-3.359889, 29.337444],
[-3.35869, 29.335728],
[-3.357833, 29.333324],
[-3.357661, 29.331779],
[-3.35749, 29.330921],
[-3.359204, 29.329376],
[-3.358004, 29.327316],
[-3.357147, 29.324741],
[-3.354234, 29.324398],
[-3.353206, 29.32148],
[-3.351835, 29.31736],
[-3.350807, 29.314098],
[-3.349607, 29.30912],
[-3.347722, 29.303455],
[-3.347037, 29.296932],
[-3.347037, 29.291267],
[-3.346351, 29.289894],
[-3.344295, 29.289036],
[-3.34121, 29.291439],
[-3.341724, 29.293499],
[-3.343266, 29.297104],
[-3.343781, 29.301567],
[-3.344295, 29.302425],
[-3.345151, 29.305172],
[-3.345151, 29.306889],
[-3.344637, 29.309635],
[-3.34498, 29.31324],
[-3.346522, 29.315815],
[-3.345666, 29.317703],
[-3.343781, 29.31736],
[-3.341381, 29.31633],
[-3.34001, 29.31633],
[-3.338811, 29.316673]
    ]]}}
]};

var geojson;
var info = L.control();
var legend = L.control({position: 'bottomright'});

function getColor(d) {
    return d > 1000 ? '#800026' :
           d > 500  ? '#BD0026' :
           d > 200  ? '#E31A1C' :
           d > 100  ? '#FC4E2A' :
           d > 50   ? '#FD8D3C' :
           d > 20   ? '#FEB24C' :
           d > 10   ? '#FED976' :
                      '#FFEDA0';
}

function style(feature) {
    return {
        fillColor: getColor(feature.properties.density),
        weight: 2,
        opacity: 1,
        color: 'white',
        dashArray: '3',
        fillOpacity: 0.7
    };
}

function highlightFeature(e) {
    var layer = e.target;

    layer.setStyle({
        weight: 5,
        color: '#666',
        dashArray: '',
        fillOpacity: 0.7
    });

    layer.bringToFront();
    info.update(layer.feature.properties);
}

function resetHighlight(e) {
    geojson.resetStyle(e.target);
    info.update();
}

function zoomToFeature(e) {
    map.fitBounds(e.target.getBounds());
}

function onEachFeature(feature, layer) {
    layer.on({
        mouseover: highlightFeature,
        mouseout: resetHighlight,
        click: zoomToFeature
    });
}

info.onAdd = function (map) {
    this._div = L.DomUtil.create('div', 'info'); // create a div with a class "info"
    this.update();
    return this._div;
};

// method that we will use to update the control based on feature properties passed
info.update = function (props) {
    this._div.innerHTML = '<h4>Burundi Population Density</h4>' +  (props ?
        '<b>' + props.name + '</b><br />' + props.density + ' people / mi<sup>2</sup>'
        : 'Hover over a state');
};

legend.onAdd = function (map) {

    var div = L.DomUtil.create('div', 'info legend'),
        grades = [0, 10, 20, 50, 100, 200, 500, 1000],
        labels = [];

    // loop through our density intervals and generate a label with a colored square for each interval
    for (var i = 0; i < grades.length; i++) {
        div.innerHTML +=
            '<i style="background:' + getColor(grades[i] + 1) + '"></i> ' +
            grades[i] + (grades[i + 1] ? '&ndash;' + grades[i + 1] + '<br>' : '+');
    }

    return div;
};


var map = L.map('map').setView([-3.3753007, 29.3543791], 4); //[-3.3753007, 29.3543791]

var tiles = L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png', {
    maxZoom: 19,
    attribution: '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'
}).addTo(map);

geojson = L.geoJson(statesData, {
    style: style,
    onEachFeature: onEachFeature
}).addTo(map);

legend.addTo(map);
info.addTo(map);
console.log(statesData)

